{
  "blueprints": [
    {
      "id": "bp1",
      "cluster_id": "cluster1",
      "problem_formulation": {
        "problem_statement": "Вы работаете в отделе контроля качества ПО. Вам нужно формализовать требования к системе авторизации: 'Пользователь получает доступ, если он ввел правильный пароль И (его аккаунт подтвержден по email ИЛИ он использует доверенное устройство)'. Разработчики написали код, но он работает некорректно в некоторых сценариях. Вам нужно проанализировать логическое выражение, построить таблицу истинности, найти ошибку и предложить эквивалентное, но более простое условие для оптимизации кода.",
        "expected_hypotheses": [
          "Доступ есть, только если все три условия (пароль, подтверждение, устройство) истинны.",
          "Операции И и ИЛИ взаимозаменяемы, если правильно расставить скобки.",
          "Если пароль неверен, то проверку остальных условий можно не делать."
        ]
      },
      "knowledge_infusions": [
        "КИ 1: Определение и таблицы истинности базовых логических операций: НЕ (¬), И (∧), ИЛИ (∨).",
        "КИ 2: Приоритет операций и роль скобок в сложных логических выражениях.",
        "КИ 3: Понятие логической эквивалентности. Законы Де Моргана и другие упрощающие тождества (например, дистрибутивность)."
      ],
      "practice_tasks": [
        "ПМ 1: Для выражения A ∧ (B ∨ C) постройте полную таблицу истинности. Определите, в каких строках значение истинно.",
        "ПМ 2: Упростите выражение ¬(A ∧ B) ∨ (A ∧ C), используя законы Де Моргана и дистрибутивность. Проверьте эквивалентность с исходным, построив таблицы истинности для обоих выражений."
      ],
      "contradictions": [
        "Разработчик утверждает, что выражение (A ∧ B) ∨ C эквивалентно A ∧ (B ∨ C). Постройте таблицы истинности для обоих выражений. Найдите набор значений переменных (A, B, C), при котором результаты различаются. Это противоречие доказывает, что приоритет операций и скобки критически важны."
      ],
      "synthesis_tasks": [
        "Вернитесь к исходной проблеме. Запишите условие доступа в виде логического выражения (P - пароль, E - email, D - устройство). Найдите в его таблице истинности строки, где доступ выдается не по требованиям. Предложите исправленное и, если возможно, упрощенное эквивалентное выражение. Объясните, почему оно проще для понимания и выполнения процессором."
      ],
      "reflection_questions": [
        "Как построение таблицы истинности помогло выявить ошибку в логике требований?",
        "В каких реальных ситуациях (не только в IT) умение упрощать логические выражения может быть полезно?",
        "Как изменился ваш подход к анализу сложных условий после изучения законов эквивалентности?"
      ],
      "fsm_rules": {
        "correct_hypothesis": "Если гипотеза 'Если пароль неверен, то проверку остальных условий можно не делать' верно идентифицирует свойство конъюнкции (0 ∧ X = 0), то proceed_to_practice.",
        "incorrect_hypothesis": "Если гипотеза об обязательной истинности всех трех условий, то provide_ki_1 (таблицы истинности для И и ИЛИ).",
        "mastery_achieved": "Если успешно выполнены ПМ 1, ПМ 2 и синтез-задача, то proceed_to_next_cluster."
      }
    },
    {
      "id": "bp2",
      "cluster_id": "cluster2",
      "problem_formulation": {
        "problem_statement": "Вы анализируете базу данных сотрудников компании. Вам нужно проверить корректность двух общих утверждений, сделанных менеджером: 1) 'В нашем отделе все сотрудники прошли курс по кибербезопасности'. 2) 'В компании есть сотрудники, которые знают все наши внутренние системы'. При запросе к базе данных вы получаете конкретные записи. Как формально проверить истинность этих утверждений и как корректно сформулировать их отрицание, если они ложны?",
        "expected_hypotheses": [
          "Чтобы проверить утверждение 'все сотрудники прошли курс', достаточно найти одного, кто прошел.",
          "Отрицание 'все прошли курс' — это 'никто не прошел курс'.",
          "Утверждение 'есть сотрудник, который знает все системы' можно проверить, спросив у каждого сотрудника, знает ли он хотя бы одну систему."
        ]
      },
      "knowledge_infusions": [
        "КИ 1: Понятие предиката от одной и многих переменных. Кванторы общности (∀) и существования (∃). Структура утверждений с кванторами.",
        "КИ 2: Правила отрицания утверждений с кванторами: ¬(∀x P(x)) ≡ ∃x ¬P(x) и ¬(∃x Q(x)) ≡ ∀x ¬Q(x).",
        "КИ 3: Многоместные предикаты и вложенные кванторы. Порядок кванторов влияет на смысл (∀x ∃y vs ∃y ∀x)."
      ],
      "practice_tasks": [
        "ПМ 1: Заданы предикаты C(x): 'x прошел курс', S(x): 'x — сотрудник отдела'. Запишите утверждение менеджера 'В нашем отделе все сотрудники прошли курс' формально. Запишите его отрицание и переведите на естественный язык.",
        "ПМ 2: Заданы предикаты E(x): 'x — сотрудник компании', K(x, y): 'x знает систему y'. Запишите формально утверждение 'В компании есть сотрудники, которые знают все наши внутренние системы'. Укажите порядок кванторов."
      ],
      "contradictions": [
        "Менеджер говорит: 'Неверно, что все сотрудники отдела прошли курс'. Ассистент понимает это как 'Все сотрудники отдела не прошли курс'. Проверьте на примере отдела из трех человек, где один прошел курс, а двое нет. Какое из двух пониманий верно? Это противоречие приводит к необходимости формальных правил отрицания."
      ],
      "synthesis_tasks": [
        "На основе выгрузки из базы данных (конкретный набор записей) определите истинность двух исходных утверждений менеджера. Для каждого ложного утверждения сформулируйте его корректное отрицание на естественном языке и покажите формальный переход от исходной формулы к формуле отрицания."
      ],
      "reflection_questions": [
        "Чем проверка утверждения с квантором ∀ отличается от проверки утверждения с квантором ∃ на практике (в БД, в жизни)?",
        "Почему интуитивное построение отрицания часто приводит к ошибке? Как формальные правила помогают этого избежать?",
        "Где, кроме анализа данных, вы можете встретить вложенные кванторы (∀∃, ∃∀)?"
      ],
      "fsm_rules": {
        "correct_hypothesis": "Если гипотеза о проверке 'все прошли курс' верно указывает на необходимость поиска контрпримера (хотя бы одного, кто не прошел), то proceed_to_practice.",
        "incorrect_hypothesis": "Если гипотеза, что отрицание 'все прошли' — это 'никто не прошел', то provide_ki_2 (правила отрицания кванторов).",
        "mastery_achieved": "Если успешно выполнены ПМ 1, ПМ 2 и синтез-задача с корректным определением истинности и построением отрицаний, то proceed_to_next_cluster."
      }
    },
    {
      "id": "bp3",
      "cluster_id": "cluster3",
      "problem_formulation": {
        "problem_statement": "Вы — консультант по логике в юридической фирме. Вам нужно проанализировать сложный пункт договора: 'Компания обязана выплатить бонус, если поставка будет выполнена в срок И (качество товара соответствует спецификации ИЛИ клиент предоставил письменный отказ от проверки качества), ЕСЛИ ТОЛЬКО не было форс-мажорных обстоятельств'. Юристы спорят о трактовке. Требуется декомпозировать утверждение на логические составляющие, определить порядок операций (учитывая 'если', 'если только'), записать формально и проанализировать все возможные сценарии выплаты бонуса.",
        "expected_hypotheses": [
          "Фраза 'если только' означает простое условие 'если'.",
          "Чтобы бонус НЕ выплачивался, должны быть нарушены все условия: срыв срока, плохое качество и отсутствие отказа от проверки.",
          "Форс-мажор отменяет все остальные условия, делая их неважными."
        ]
      },
      "knowledge_infusions": [
        "КИ 1: Способы выражения логических связок в естественном языке: 'если A, то B' (A → B), 'A, если только не B' (A → ¬B? A ↔ ¬B?). Анализ импликации и ее контрапозиции.",
        "КИ 2: Интеграция: перевод сложного высказывания с вложенными условиями и кванторами ('для всех поставок...') в формальную запись с использованием ∧, ∨, ¬, →, ∀, ∃.",
        "КИ 3: Стратегия анализа: 1) Выделить элементарные предикаты. 2) Определить scope (область действия) кванторов и отрицаний. 3) Построить формулу по синтаксису. 4) Упростить, если возможно."
      ],
      "practice_tasks": [
        "ПМ 1: Переведите на формальный язык: 'Бонус выплачивается (B), если выполнена поставка в срок (S) и качество соответствует (Q)'. Затем добавьте условие: '...если только не было форс-мажора (F)'. Проанализируйте разные варианты записи: B ↔ (S ∧ Q ∧ ¬F) vs (S ∧ Q) → (B ∧ ¬F) и т.д.",
        "ПМ 2: Для утверждения 'Для всех клиентов, если заказ дороже 1000₽, то существует менеджер, который с ним работает' выделите предикаты, расставьте кванторы и запишите формулу. Запишите отрицание этого утверждения."
      ],
      "contradictions": [
        "Один юрист трактует фразу 'A, если только не B' как 'A, если и только если не B' (A ↔ ¬B). Другой — как 'B препятствует A', то есть 'если B, то не A' (B → ¬A) или 'A → ¬B'. Проанализируйте эти варианты на конкретном примере. Покажите, что формулы не эквивалентны, найдя различающий набор значений A и B. Какая трактовка более соответствует обычному смыслу 'если только не'?"
      ],
      "synthesis_tasks": [
        "Дайте полный формальный анализ спорного пункта договора. 1. Введите атомарные предикаты (например, P - поставка в срок, Q - качество, W - отказ от проверки, F - форс-мажор, B - выплата бонуса). 2. Постройте итоговую логическую формулу, явно показав рассуждения. 3. Постройте таблицу истинности или разберите по случаям. 4. Сформулируйте четкие, непротиворечивые условия выплаты бонуса на естественном языке для включения в исправленную редакцию договора."
      ],
      "reflection_questions": [
        "Какие этапы формализации сложного текста оказались самыми трудными? (Выделение предикатов, расстановка скобок, понимание 'если только' и т.д.)",
        "Как комбинация булевой логики и логики предикатов расширила ваши возможности для анализа реальных задач?",
        "Как можно применить этот опыт анализа договора к проверке сложных условий в программировании или технических требованиях?"
      ],
      "fsm_rules": {
        "correct_hypothesis": "Если гипотеза о том, что 'Форс-мажор отменяет все остальные условия' верно интерпретируется как доминирующее условие, делающее бонус ложным независимо от P, Q, W, то proceed_to_practice.",
        "incorrect_hypothesis": "Если гипотеза о том, что для невыплаты бонуса должны нарушиться все условия (P, Q, W), то provide_ki_1 (анализ импликации и контрапозиции, разбор фразы 'если только').",
        "mastery_achieved": "Если успешно выполнены ПМ 1, ПМ 2 и синтез-задача с корректной формализацией и четкими выводами для юристов, то end_of_module."
      }
    }
  ]
}